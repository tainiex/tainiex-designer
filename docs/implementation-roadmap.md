# Tainiex Designer - 实施路线图

## 1. 总体规划

### 1.1 版本规划

```
v0.1.0 (当前)
  ↓
v0.2.0 - MVP 版本 (2 个月)
  ↓
v0.3.0 - 增强版本 (1 个月)
  ↓
v0.5.0 - 生产版本 (2 个月)
  ↓
v1.0.0 - 企业版本 (3 个月)
  ↓
v2.0.0 - 协作版本 (4+ 个月)
```

### 1.2 时间线

```
2026年2月 ────────────────────────────────────────────────────────> 2027年2月
    │         │         │         │         │         │         │
    │         │         │         │         │         │         │
  v0.1.0   v0.2.0    v0.3.0    v0.5.0    v1.0.0    v1.5.0    v2.0.0
  (当前)    (MVP)    (增强)    (生产)    (企业)    (高级)    (协作)
    │         │         │         │         │         │         │
    └─ 2月    └─ 4月    └─ 5月    └─ 7月    └─ 10月   └─ 12月   └─ 2月
```

## 2. v0.2.0 - MVP 版本（P0 功能）

**目标**：完成基本的数据库建模和 DDL 生成功能

**时间**：2 个月（2026年2月 - 2026年4月）

**工作量**：约 40 人天

### 2.1 Phase 1: 核心功能完善（3 周）

#### 2.1.1 关系系统重构（1 周）

**目标**：完善关系创建、编辑和显示

**任务清单**：
- [ ] 关系创建向导
  - [ ] 选择源表和目标表
  - [ ] 选择关联字段
  - [ ] 设置关系类型（1:1, 1:N, N:M）
  - [ ] 配置级联操作
- [ ] 关系编辑对话框
  - [ ] 修改关系类型
  - [ ] 修改关联字段
  - [ ] 修改级联规则
- [ ] 关系可视化增强
  - [ ] 不同类型的连线样式
  - [ ] 箭头和标记
  - [ ] 关系标签显示
- [ ] 关系验证
  - [ ] 检查字段类型兼容性
  - [ ] 检查循环依赖
  - [ ] 检查孤立表

**交付物**：
- 完整的关系管理系统
- 关系编辑 UI 组件
- 单元测试

#### 2.1.2 撤销/重做系统（1 周）

**目标**：实现命令模式的撤销/重做

**任务清单**：
- [ ] 命令模式基础架构
  - [ ] Command 接口定义
  - [ ] CommandManager 实现
  - [ ] 命令历史栈
- [ ] 具体命令实现
  - [ ] CreateTableCommand
  - [ ] DeleteTableCommand
  - [ ] MoveTableCommand
  - [ ] AddColumnCommand
  - [ ] DeleteColumnCommand
  - [ ] ModifyColumnCommand
  - [ ] CreateRelationshipCommand
  - [ ] DeleteRelationshipCommand
- [ ] UI 集成
  - [ ] 快捷键（Ctrl+Z, Ctrl+Y）
  - [ ] 菜单项
  - [ ] 历史记录面板（可选）
- [ ] 状态管理
  - [ ] 命令合并（连续的小操作）
  - [ ] 内存管理（限制历史记录数量）

**交付物**：
- 完整的撤销/重做系统
- 所有操作的命令实现
- 单元测试

#### 2.1.3 项目持久化（1 周）

**目标**：实现项目的保存和加载

**任务清单**：
- [ ] 文件格式设计
  - [ ] JSON Schema 定义
  - [ ] 版本标识
  - [ ] 元数据结构
- [ ] 保存功能
  - [ ] 序列化 Schema
  - [ ] 保存到文件（Tauri API）
  - [ ] 另存为功能
  - [ ] 快速保存（Ctrl+S）
- [ ] 加载功能
  - [ ] 反序列化 Schema
  - [ ] 从文件加载（Tauri API）
  - [ ] 错误处理和恢复
  - [ ] 版本兼容性检查
- [ ] 最近文件列表
  - [ ] 记录最近打开的文件
  - [ ] 快速打开菜单
- [ ] 自动保存（可选）
  - [ ] 定时自动保存
  - [ ] 崩溃恢复

**交付物**：
- 完整的文件保存/加载系统
- Tauri 文件系统集成
- 单元测试

### 2.2 Phase 2: 数据库支持扩展（2 周）

#### 2.2.1 MySQL DDL 生成器（0.5 周）

**任务清单**：
- [ ] 实现 MySQLGenerator 类
- [ ] 数据类型映射
- [ ] 表结构生成
- [ ] 索引生成
- [ ] 外键约束生成
- [ ] 字符集和排序规则
- [ ] 引擎选择（InnoDB, MyISAM）
- [ ] 单元测试

#### 2.2.2 PostgreSQL DDL 生成器（0.5 周）

**任务清单**：
- [ ] 实现 PostgreSQLGenerator 类
- [ ] 数据类型映射
- [ ] 表结构生成
- [ ] 索引生成（包括部分索引）
- [ ] 外键约束生成
- [ ] Schema 支持
- [ ] 序列生成
- [ ] 单元测试

#### 2.2.3 SQL Server DDL 生成器（0.5 周）

**任务清单**：
- [ ] 实现 SQLServerGenerator 类
- [ ] 数据类型映射
- [ ] 表结构生成
- [ ] 索引生成（聚集/非聚集）
- [ ] 外键约束生成
- [ ] Schema 支持
- [ ] Identity 列支持
- [ ] 单元测试

#### 2.2.4 DDL 导出增强（0.5 周）

**任务清单**：
- [ ] 导出选项对话框
  - [ ] 选择数据库类型
  - [ ] 选择导出内容（表、索引、约束等）
  - [ ] 格式化选项
- [ ] 导出到文件
  - [ ] 保存为 .sql 文件
  - [ ] 批量导出
- [ ] 预览功能
  - [ ] DDL 预览窗口
  - [ ] 语法高亮
- [ ] 复制到剪贴板

**交付物**：
- 3 个数据库的 DDL 生成器
- 导出功能 UI
- 单元测试

### 2.3 Phase 3: 数据验证和约束（1 周）

#### 2.3.1 数据验证引擎（0.5 周）

**任务清单**：
- [ ] 验证规则引擎
  - [ ] 规则定义接口
  - [ ] 规则执行器
  - [ ] 验证结果收集
- [ ] 内置验证规则
  - [ ] 表名重复检查
  - [ ] 字段名重复检查
  - [ ] 主键检查
  - [ ] 外键完整性检查
  - [ ] 数据类型兼容性检查
  - [ ] 命名规范检查（可选）
- [ ] 验证结果展示
  - [ ] 错误列表面板
  - [ ] 警告提示
  - [ ] 快速修复建议

#### 2.3.2 索引管理（0.25 周）

**任务清单**：
- [ ] 索引数据模型
  - [ ] Index 类定义
  - [ ] 索引类型（普通、唯一、全文等）
- [ ] 索引 UI
  - [ ] 索引列表
  - [ ] 添加/编辑/删除索引
  - [ ] 选择索引字段
- [ ] 索引验证
  - [ ] 检查索引字段存在性
  - [ ] 检查索引名称唯一性

#### 2.3.3 约束管理（0.25 周）

**任务清单**：
- [ ] 约束数据模型
  - [ ] Constraint 类扩展
  - [ ] CHECK 约束
  - [ ] UNIQUE 约束
  - [ ] DEFAULT 约束
- [ ] 约束 UI
  - [ ] 约束列表
  - [ ] 添加/编辑/删除约束
  - [ ] 约束表达式编辑器
- [ ] 约束验证
  - [ ] 表达式语法检查
  - [ ] 约束冲突检查

**交付物**：
- 完整的验证系统
- 索引和约束管理
- 单元测试

### 2.4 Phase 4: UI/UX 改进（1 周）

#### 2.4.1 菜单栏和工具栏（0.5 周）

**任务清单**：
- [ ] 菜单栏实现
  - [ ] 文件菜单（新建、打开、保存、导出）
  - [ ] 编辑菜单（撤销、重做、复制、粘贴）
  - [ ] 视图菜单（缩放、网格、主题）
  - [ ] 工具菜单（验证、生成 DDL）
  - [ ] 帮助菜单（关于、文档）
- [ ] 工具栏增强
  - [ ] 常用操作快捷按钮
  - [ ] 工具提示
  - [ ] 图标设计

#### 2.4.2 快捷键系统（0.25 周）

**任务清单**：
- [ ] 快捷键管理器
  - [ ] 快捷键注册
  - [ ] 快捷键冲突检测
  - [ ] 快捷键帮助
- [ ] 常用快捷键
  - [ ] Ctrl+N: 新建项目
  - [ ] Ctrl+O: 打开项目
  - [ ] Ctrl+S: 保存项目
  - [ ] Ctrl+Z: 撤销
  - [ ] Ctrl+Y: 重做
  - [ ] Delete: 删除选中
  - [ ] Ctrl+C/V: 复制粘贴
  - [ ] Ctrl+A: 全选
  - [ ] Ctrl+F: 搜索

#### 2.4.3 状态栏和通知（0.25 周）

**任务清单**：
- [ ] 状态栏
  - [ ] 显示当前工具
  - [ ] 显示缩放级别
  - [ ] 显示选中对象数量
  - [ ] 显示验证状态
- [ ] 通知系统
  - [ ] Toast 通知
  - [ ] 成功/错误/警告提示
  - [ ] 进度提示

**交付物**：
- 完整的菜单和工具栏
- 快捷键系统
- 状态栏和通知
- UI 测试

### 2.5 Phase 5: 测试和文档（1 周）

#### 2.5.1 测试（0.5 周）

**任务清单**：
- [ ] 单元测试补充
- [ ] 集成测试
- [ ] E2E 测试（关键流程）
- [ ] 性能测试
- [ ] 跨平台测试

#### 2.5.2 文档（0.5 周）

**任务清单**：
- [ ] 用户手册
- [ ] 快速入门指南
- [ ] API 文档更新
- [ ] 变更日志
- [ ] 发布说明

**交付物**：
- 测试报告
- 完整文档
- v0.2.0 发布包

## 3. v0.3.0 - 增强版本（P1 部分功能）

**目标**：提升用户体验和易用性

**时间**：1 个月（2026年4月 - 2026年5月）

**工作量**：约 20 人天

### 3.1 功能列表

- [ ] 自动保存和崩溃恢复
- [ ] 搜索和过滤功能
- [ ] 主题切换（暗色/亮色）
- [ ] 导出图片（PNG/SVG）
- [ ] 数据字典导出
- [ ] 表模板系统
- [ ] 批量操作
- [ ] 性能优化

## 4. v0.5.0 - 生产版本（P1 完整功能）

**目标**：达到生产环境可用标准

**时间**：2 个月（2026年5月 - 2026年7月）

**工作量**：约 40 人天

### 4.1 功能列表

- [ ] 逆向工程（从数据库导入）
- [ ] 视图支持
- [ ] 存储过程支持（基础）
- [ ] 多标签页支持
- [ ] 缩略图导航
- [ ] 图层管理
- [ ] 历史记录面板
- [ ] 插件系统基础

## 5. v1.0.0 - 企业版本（P2 功能）

**目标**：满足企业级需求

**时间**：3 个月（2026年7月 - 2026年10月）

**工作量**：约 60 人天

### 5.1 功能列表

- [ ] Schema 比较和同步
- [ ] 数据迁移脚本生成
- [ ] 增量更新脚本
- [ ] 命名规范检查
- [ ] 性能优化建议
- [ ] 索引优化建议
- [ ] 自动文档生成
- [ ] HTML/PDF 报告
- [ ] 版本控制集成（Git）
- [ ] 多语言支持

## 6. v2.0.0 - 协作版本（P3 功能）

**目标**：支持团队协作

**时间**：4+ 个月（2026年10月 - 2027年2月+）

**工作量**：约 80 人天

### 6.1 功能列表

- [ ] 多用户协作
- [ ] 实时同步
- [ ] 冲突解决
- [ ] 评论系统
- [ ] 变更追踪
- [ ] 审批流程
- [ ] 权限管理
- [ ] 云端存储
- [ ] API 服务

## 7. 开发流程

### 7.1 迭代周期

```
2 周迭代周期
├── 第 1 周
│   ├── 周一：迭代计划
│   ├── 周二-周四：开发
│   └── 周五：代码审查
└── 第 2 周
    ├── 周一-周三：开发
    ├── 周四：测试
    └── 周五：发布和回顾
```

### 7.2 质量保证

**代码质量**：
- TypeScript 严格模式
- ESLint 检查
- 代码审查
- 单元测试覆盖率 > 70%

**测试策略**：
- 单元测试：核心逻辑
- 集成测试：模块交互
- E2E 测试：关键流程
- 性能测试：渲染和交互

**文档要求**：
- API 文档（JSDoc）
- 用户文档
- 开发文档
- 变更日志

### 7.3 发布流程

1. **功能冻结**：停止新功能开发
2. **测试阶段**：全面测试
3. **Bug 修复**：修复发现的问题
4. **文档更新**：更新所有文档
5. **发布候选**：创建 RC 版本
6. **最终测试**：验证 RC 版本
7. **正式发布**：发布到 GitHub Releases
8. **发布公告**：更新网站和社交媒体

## 8. 资源需求

### 8.1 人力资源

**核心团队**（建议）：
- 1 名全栈开发（前端 + Rust）
- 1 名前端开发（可选）
- 1 名测试工程师（可选）
- 1 名 UI/UX 设计师（可选）

**当前配置**：
- 1 名开发者 + LLM Agent 辅助

### 8.2 技术资源

**开发环境**：
- Node.js 18+
- Rust 1.70+
- Git
- VS Code / IDE

**测试环境**：
- Windows 10/11
- macOS 12+
- Ubuntu 20.04+

**CI/CD**：
- GitHub Actions
- 自动化测试
- 自动化构建

### 8.3 时间资源

**总体时间线**：
- v0.2.0: 2 个月
- v0.3.0: 1 个月
- v0.5.0: 2 个月
- v1.0.0: 3 个月
- v2.0.0: 4+ 个月

**总计**：约 12 个月

## 9. 风险管理

### 9.1 技术风险

| 风险 | 缓解措施 | 应急计划 |
|------|----------|----------|
| 性能问题 | 早期性能测试 | 使用 WebGL 或优化算法 |
| 跨平台兼容性 | 持续测试 | 针对性修复 |
| 数据库连接复杂性 | 使用成熟库 | 简化功能范围 |

### 9.2 进度风险

| 风险 | 缓解措施 | 应急计划 |
|------|----------|----------|
| 功能延期 | 预留缓冲时间 | 调整优先级 |
| 资源不足 | 合理规划 | 延后非核心功能 |
| 技术债务 | 定期重构 | 专门的重构迭代 |

### 9.3 质量风险

| 风险 | 缓解措施 | 应急计划 |
|------|----------|----------|
| Bug 过多 | 充分测试 | 延长测试周期 |
| 用户体验差 | 用户测试 | 快速迭代改进 |
| 性能下降 | 性能监控 | 性能优化专项 |

## 10. 成功指标

### 10.1 v0.2.0 成功标准

- [ ] 所有 P0 功能完成
- [ ] 单元测试覆盖率 > 70%
- [ ] 无 P0/P1 级别 Bug
- [ ] 文档完整
- [ ] 可在 3 个平台运行

### 10.2 v0.5.0 成功标准

- [ ] 所有 P1 功能完成
- [ ] 用户满意度 > 80%
- [ ] 性能达标（60fps）
- [ ] 支持 5+ 种数据库
- [ ] 有实际用户使用

### 10.3 v1.0.0 成功标准

- [ ] 所有 P2 功能完成
- [ ] 企业客户采用
- [ ] 社区活跃
- [ ] 插件生态初步建立
- [ ] 性能和稳定性优秀

## 11. 下一步行动

### 11.1 立即行动（本周）

1. [ ] 审查本路线图
2. [ ] 确认 v0.2.0 范围
3. [ ] 创建 GitHub Project
4. [ ] 创建 Milestone
5. [ ] 创建 Issues

### 11.2 短期行动（下周）

1. [ ] 开始 Phase 1 开发
2. [ ] 设置 CI/CD
3. [ ] 建立测试框架
4. [ ] 开始用户文档

### 11.3 中期行动（本月）

1. [ ] 完成 Phase 1-2
2. [ ] 发布 Alpha 版本
3. [ ] 收集早期反馈
4. [ ] 调整计划

## 12. 附录

### 12.1 参考资料

- [MySQL Workbench 文档](https://dev.mysql.com/doc/workbench/en/)
- [pgModeler 文档](https://pgmodeler.io/documentation)
- [DbSchema 文档](https://dbschema.com/documentation/)
- [Tauri 文档](https://tauri.app/)

### 12.2 相关文档

- [功能缺口分析](./feature-gap-analysis.md)
- [架构设计](./architecture.md)
- [数据模型](./data-model.md)
- [渲染系统](./rendering-system.md)
- [交互系统](./interaction-system.md)

### 12.3 更新日志

- 2026-02-16: 初始版本
